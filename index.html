<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <title>Python best 30</title>
    
    <!-- 환경파일 -->
    <script src="./src/env.js" defer></script>

    <!-- JavaScript -->
    <script src="./src/js/editor.js" defer></script>
    <script src="./src/js/parser.js" defer></script>
    <script src="./src/js/event.js" defer></script>
    <script src="./src/js/testCaseAndResult.js" defer></script>
    <script src="./src/js/nav.js" defer></script>

    <title>Python best 30</title>

    <!-- codemirror -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.10/codemirror.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.10/codemirror.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.10/mode/python/python.min.js"></script>

    <!-- pyscript -->
    <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
    <script defer src="https://pyscript.net/latest/pyscript.js"></script>
    <!--
        <py-config type="json">
        {
            "packages": ["numpy", "matplotlib"]
        }
        </py-config>
        -->

    <!-- css -->
    <link rel="stylesheet" href="./src/css/reset.css">
    <link rel="stylesheet" href="./src/css/style.css">
    <link rel="stylesheet" href="./src/css/hojun.css">
</head>

<body>
    <div class="container menu-on">
        <header>
            <h1>Python Algorithm Best30</h1>
            <a class="btn-exec" href="codeexec.html">Run Python</a>
            <button class="btn-fold" type="button">접어두기</button>

        </header>

        <div class="contents">
            <nav>
                <ol>
                    <li><a href="#" id="1" class="btn-que">Q1. 두 수 더하기</a></li>
                    <li><a href="#" id="2" class="btn-que">Q2. 장학금을 받는 학생</a></li>
                    <li><a href="#" id="3" class="btn-que">Q3. 두 수 더하기</a></li>
                    <li><a href="#" id="4" class="btn-que">Q4. 두 수 더하기</a></li>
                    <li><a href="#" id="5" class="btn-que">Q5. 두 수 더하기</a></li>
                    <li><a href="#" id="6" class="btn-que">Q6. 두 수 더하기</a></li>
                    <li><a href="#" id="7" class="btn-que">Q7. 두 수 더하기</a></li>
                    <li><a href="#" id="8" class="btn-que">Q8. 두 수 더하기</a></li>
                    <li><a href="#" id="9" class="btn-que">Q9. 두 수 더하기</a></li>
                    <li><a href="#" id="10" class="btn-que">Q10. 두 수 더하기</a></li>
                    <li><a href="#" id="11" class="btn-que">Q11. 두 수 더하기</a></li>
                    <li><a href="#" id="12" class="btn-que">Q12. 두 수 더하기</a></li>
                    <li><a href="#" id="13" class="btn-que">Q13. 두 수 더하기</a></li>
                    <li><a href="#" id="14" class="btn-que">Q14. 두 수 더하기</a></li>
                    <li><a href="#" id="15" class="btn-que">Q15. 두 수 더하기</a></li>
                    <li><a href="#" id="16" class="btn-que">Q16. 두 수 더하기</a></li>
                    <li><a href="#" id="17" class="btn-que">Q17. 두 수 더하기</a></li>
                    <li><a href="#" id="18" class="btn-que">Q18. 두 수 더하기</a></li>
                    <li><a href="#" id="19" class="btn-que">Q19. 두 수 더하기</a></li>
                    <li><a href="#" id="20" class="btn-que">Q20. 두 수 더하기</a></li>
                    <li><a href="#" id="21" class="btn-que">Q21. 두 수 더하기</a></li>
                    <li><a href="#" id="22" class="btn-que">Q22. 두 수 더하기</a></li>
                    <li><a href="#" id="23" class="btn-que">Q23. 두 수 더하기</a></li>
                    <li><a href="#" id="24" class="btn-que">Q24. 두 수 더하기</a></li>
                    <li><a href="#" id="25" class="btn-que">Q25. 두 수 더하기</a></li>
                    <li><a href="#" id="26" class="btn-que">Q26. 두 수 더하기</a></li>
                    <li><a href="#" id="27" class="btn-que">Q27. 두 수 더하기</a></li>
                    <li><a href="#" id="28" class="btn-que">Q28. 두 수 더하기</a></li>
                    <li><a href="#" id="29" class="btn-que">Q29. 두 수 더하기</a></li>
                    <li><a href="#" id="30" class="btn-que">Q30. 두 수 더하기</a></li>
                </ol>
            </nav>
            <main>
                <section class="description">
                </section>
                <section class="editor">
                    <form>
                        <div class="state-area">
                            <div class="editor">
                                <textarea id="codeeditor"></textarea>
                            </div>
                        </div>
                    </form>
                    <div class="test-case">
                        <div>
                            <label for="testcase1">testcase1</label>
                            <input disabled id="testcase1" />
                        </div>
                        <div>
                            <label for="testcase1">testcase2</label>
                            <input disabled id="testcase2" />
                        </div>
                        <div>
                            <label for="testcase1">testcase3</label>
                            <input disabled id="testcase3" />
                        </div>
                    </div>
                    <div class="btn-contain">
                        <button id="btn-run" type="submit">채점하기</button>
                    </div>

                    <div id="result">

                        <h3>Result</h3>
                        <div id="result_desc"></div>

                    </div>

                    <textarea style="display: none;" id="testcaseResult"></textarea>

                    <py-script>
                        # 콘솔에 출력하는 방법 : js.console.log(testCase)
                        import ast

                        def result(*ags, **kws):
                            code = Element("codeeditor").element.innerText
                            testCase1 = Element("testcase1").element.value
                            testCase2 = Element("testcase2").element.value
                            testCase3 = Element("testcase3").element.value

                            answer = Element("testcaseResult").element.value
                            answer = f'[{answer}]'
                            answer = ast.literal_eval(answer)

                            testCase = f'[[{testCase1}], [{testCase2}], [{testCase3}]]'
                            code += f'\n[solution(i) for i in {testCase}]'
                            try:
                                result = multiline_eval(code)
                                result = ast.literal_eval(result)
                                resultString = "&lt;p class='que-result'&gt;테스트케이스번호 : 통과여부 (실행값==정답값) &lt;&#47;p&gt;"
                                passing = "&lt;span class='result-pass'&gt; 통과 &lt;&#47;span&gt;"
                                fail = "&lt;span class='result-fail'&gt; 실패 &lt;&#47;span&gt;"
                                result_save_localstorage = []
                                for i in range(3):
                                    resultString += f"&lt;p class='que-result-{i} checkPass'&gt;test{i+1} : {passing if result[i] == answer[i] else fail}&lt;span class='result-compare'&gt;({result[i]}=={answer[i]})&lt;&#47;span&gt;&lt;&#47;p&gt;"
                                    result_save_localstorage.append(result[i] == answer[i])
                                js.document.querySelector('#result_desc').innerHTML = resultString
                                if all(result_save_localstorage):
                                    PAGE_NAME = js.document.querySelector('.active').id
                                    js.window.localStorage.setItem(f'{PAGE_NAME}_check', '통과')
                            except Exception as e:
                                result = f"&lt;p class='que-result-error'&gt;애러입니다. 문제를 다시 풀어주세요.&lt;&#47;p&gt; &lt;p class='que-result-errorname'&gt;애러명 : {e}&lt;&#47;p&gt;"
                                js.document.querySelector('#result_desc').innerHTML = result


                        def multiline_eval(expr, ctx={}):
                            results = []
                            for node in ast.parse(expr).body:
                                if isinstance(node, ast.Expr):
                                    result = eval(compile(ast.Expression(node.value), 'string', 'eval'), ctx)
                                    results.append(result)            
                                else:
                                    module = ast.Module([node], type_ignores=[])
                                    results.append(exec(compile(module, 'string', 'exec'), ctx))
                            return '\n'.join(map(str, results))[5:]

                        button_run = Element("btn-run")
                        button_run.element.onclick = result
                        </py-script>
                </section>
            </main>
        </div>
    </div>
    <footer>
        <p>Copyright 2023. <strong>WENIV</strong> All rights reserved.</p>
    </footer>
</body>
</html>